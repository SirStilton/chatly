<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chatly</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <div class="bg"></div>

  <header class="topbar">
    <div class="brand">
      <div class="logo">ðŸŸ©</div>
      <div class="brandText">
        <div class="brandName">Chatly</div>
        <div class="brandSub">grÃ¼n Â· transparent Â· realtime</div>
      </div>
    </div>

    <div class="topActions">
      <div class="pill" id="mePill">nicht angemeldet</div>
      <button class="btn ghost" id="btnMobileMenu" title="RÃ¤ume">â˜°</button>
      <button class="btn ghost" id="btnAdmin" style="display:none;">Admin</button>
      <button class="btn" id="btnLogout" style="display:none;">Logout</button>
    </div>
  </header>

  <main class="wrap">
    <!-- AUTH -->
    <section class="card auth" id="authCard">
      <div class="tabs">
        <button class="tab active" id="tabLogin">Login</button>
        <button class="tab" id="tabRegister">Registrieren</button>
      </div>

      <form class="form" id="loginForm">
        <label>
          <span>Username</span>
          <input id="loginUser" maxlength="10" autocomplete="username" placeholder="z.B. Tom123" />
        </label>
        <label>
          <span>Passwort</span>
          <input id="loginPass" type="password" autocomplete="current-password" placeholder="mind. 6 Zeichen" />
        </label>
        <button class="btn primary" type="submit">Login</button>
        <div class="msg" id="loginMsg"></div>
      </form>

      <form class="form" id="registerForm" style="display:none;">
        <label>
          <span>Username</span>
          <input id="regUser" maxlength="10" autocomplete="username" placeholder="max 10 Zeichen" />
          <small>Nur Buchstaben/Zahlen/_. Keine E-Mail.</small>
        </label>
        <label>
          <span>Passwort</span>
          <input id="regPass" type="password" autocomplete="new-password" placeholder="mind. 6 Zeichen" />
        </label>
        <button class="btn primary" type="submit">Account erstellen</button>
        <div class="msg" id="regMsg"></div>
      </form>
    </section>

    <!-- APP -->
    <section class="app" id="appCard" style="display:none;">
      <!-- Sidebar -->
      <aside class="side">
        <div class="sideTop">
          <div class="sideTitle">RÃ¤ume</div>
          <button class="btn ghost small" id="btnRefreshRooms">â†»</button>
        </div>

        <div class="sideBlock">
          <div class="sideLabel">Haupt-RÃ¤ume</div>
          <div class="rooms" id="rooms"></div>
        </div>

        <div class="sideBlock">
          <div class="sideLabel">Trending</div>
          <div class="rooms mini" id="trending"></div>
        </div>

        <div class="sideBlock">
          <div class="sideLabel">Suchen & beitreten</div>
          <div class="row">
            <input id="roomSearch" placeholder="slug / titelâ€¦" />
            <button class="btn ghost small" id="btnSearch">Suchen</button>
          </div>
          <div class="rooms mini" id="searchResults"></div>
        </div>

        <div class="sideBlock">
          <div class="sideLabel">Eigener Raum</div>
          <button class="btn primary" id="btnOpenCreateRoom">Raum erstellen</button>
          <button class="btn ghost" id="btnRandomRoom">Random Room</button>
          <div class="hint" id="createHint"></div>
        </div>
      </aside>

      <!-- Chat -->
      <section class="chat">
        <div class="chatHead">
          <div class="chatTitle">
            <div class="pill room" id="roomPill">#lobby</div>
            <div class="roomText">
              <div class="roomName" id="roomTitle">Lobby</div>
              <div class="roomDesc" id="roomSub">Allgemeiner Chat</div>
            </div>
          </div>
          <div class="chatMeta">
            <div class="status" id="statusText">offline</div>
          </div>
        </div>

        <div class="msgs" id="msgs"></div>

        <div class="composer">
          <div class="composerTop" id="htmlWrap" style="display:none;">
            <label class="check">
              <input type="checkbox" id="sendHtml" />
              <span>als Admin-HTML senden</span>
            </label>
            <span class="hint">HTML wird sandboxed gerendert.</span>
          </div>

          <div class="composerRow">
            <input id="msgInput" maxlength="100" placeholder="Nachricht (max 100)â€¦" />
            <button class="btn primary" id="btnSend">Senden</button>
          </div>
          <div class="footMsg" id="footMsg"></div>
        </div>
      </section>
    </section>
  </main>

  <!-- Mobile rooms overlay -->
  <div class="overlay" id="mobileOverlay" style="display:none;">
    <div class="overlayBackdrop" id="mobileBackdrop"></div>
    <div class="overlaySheet">
      <div class="overlayHead">
        <div class="overlayTitle">RÃ¤ume</div>
        <button class="btn ghost" id="btnMobileClose">âœ•</button>
      </div>
      <div class="overlayBody">
        <div class="sideLabel">Haupt-RÃ¤ume</div>
        <div class="rooms" id="roomsMobile"></div>
        <div class="sideLabel" style="margin-top:14px;">Trending</div>
        <div class="rooms mini" id="trendingMobile"></div>
      </div>
    </div>
  </div>

  <!-- Create room modal -->
  <div class="overlay" id="createOverlay" style="display:none;">
    <div class="overlayBackdrop" id="createBackdrop"></div>
    <div class="overlaySheet modal">
      <div class="overlayHead">
        <div class="overlayTitle">Neuen Raum erstellen</div>
        <button class="btn ghost" id="btnCreateClose">âœ•</button>
      </div>
      <div class="overlayBody">
        <form class="form" id="createRoomForm">
          <label>
            <span>Titel</span>
            <input id="crTitle" maxlength="32" placeholder="z.B. minecraft" />
          </label>
          <label>
            <span>Beschreibung</span>
            <input id="crDesc" maxlength="120" placeholder="worum gehtâ€™s?" />
          </label>
          <label>
            <span>Sichtbarkeit</span>
            <select id="crVis">
              <option value="unlisted">Unlisted (nur Ã¼ber Suche)</option>
              <option value="private">Privat (Join-Code)</option>
              <option value="public">Ã–ffentlich (wird gelistet)</option>
            </select>
          </label>
          <div class="row" id="crAdminOnlyRow" style="display:none;">
            <label class="check">
              <input type="checkbox" id="crAdminOnly" />
              <span>Admin-only</span>
            </label>
            <span class="hint">Nur role=admin kann joinen.</span>
          </div>
          <button class="btn primary" type="submit">Erstellen</button>
          <div class="msg" id="crMsg"></div>
        </form>
      </div>
    </div>
  </div>

  <!-- Admin panel overlay -->
  <div class="overlay" id="adminOverlay" style="display:none;">
    <div class="overlayBackdrop" id="adminBackdrop"></div>
    <div class="overlaySheet admin">
      <div class="overlayHead">
        <div class="overlayTitle">Admin Panel</div>
        <button class="btn ghost" id="btnAdminClose">âœ•</button>
      </div>

      <div class="adminTabs">
        <button class="tab2 active" id="admTabUsers">Users</button>
        <button class="tab2" id="admTabSystem">System</button>
        <button class="tab2" id="admTabRooms">RÃ¤ume</button>
        <button class="tab2" id="admTabLogs">Logs</button>
      </div>

      <div class="overlayBody adminBody">
        <!-- USERS -->
        <section class="admSec" id="admUsers">
          <div class="row">
            <input id="admUserSearch" placeholder="User suchenâ€¦" />
            <button class="btn ghost small" id="admRefreshUsers">â†»</button>
          </div>
          <div class="admHint" id="admUsersHint"></div>

          <div class="admBox">
            <div class="admBoxTitle">Punish</div>
            <div class="row">
              <input id="admPunishUserId" placeholder="user_id" />
              <select id="admPunishKind">
                <option value="ban">ban</option>
                <option value="mute">mute</option>
                <option value="timeout">timeout</option>
                <option value="kick">kick (room)</option>
                <option value="unban">unban</option>
                <option value="unmute">unmute</option>
                <option value="untimeout">untimeout</option>
              </select>
            </div>
            <div class="row">
              <input id="admPunishMinutes" placeholder="minutes (z.B. 10)" />
              <input id="admPunishRoom" placeholder="room_slug (nur bei kick)" />
            </div>
            <input id="admPunishReason" placeholder="reason (optional)" />
            <button class="btn primary" id="admPunishGo">AusfÃ¼hren</button>
            <div class="msg" id="admPunishMsg"></div>
          </div>

          <div class="admList" id="admUsersList"></div>
        </section>

        <!-- SYSTEM -->
        <section class="admSec" id="admSystem" style="display:none;">
          <div class="admBox">
            <div class="admBoxTitle">System Nachricht</div>
            <div class="row">
              <input id="admSysRoom" placeholder="room_slug" />
              <button class="btn ghost small" id="admSysUseCurrent">aktueller</button>
            </div>
            <input id="admSysText" maxlength="100" placeholder="max 100 Zeichenâ€¦" />
            <button class="btn primary" id="admSysSend">Senden</button>
            <div class="msg" id="admSysMsg"></div>
          </div>
          <div class="hint">System-Nachrichten sind extra markiert.</div>
        </section>

        <!-- ROOMS -->
        <section class="admSec" id="admRooms" style="display:none;">
          <div class="admBox">
            <div class="admBoxTitle">Room erstellen (Admin)</div>
            <div class="row">
              <input id="admCrTitle" maxlength="32" placeholder="Titel" />
              <select id="admCrVis">
                <option value="unlisted">unlisted</option>
                <option value="private">private</option>
                <option value="public">public</option>
              </select>
            </div>
            <input id="admCrDesc" maxlength="120" placeholder="Beschreibung" />
            <label class="check">
              <input type="checkbox" id="admCrAdminOnly" />
              <span>Admin-only</span>
            </label>
            <button class="btn primary" id="admCrGo">Erstellen</button>
            <div class="msg" id="admCrMsg"></div>
          </div>

          <div class="admBox">
            <div class="admBoxTitle">Join-Code anzeigen (private room)</div>
            <div class="row">
              <input id="admRoomInfoSlug" placeholder="room_slug" />
              <button class="btn ghost small" id="admRoomInfoGo">Laden</button>
            </div>
            <div class="hint" id="admRoomInfoOut"></div>
          </div>
        </section>

        <!-- LOGS -->
        <section class="admSec" id="admLogs" style="display:none;">
          <button class="btn ghost small" id="admRefreshLogs">â†» logs</button>
          <div class="admHint" id="admLogsMsg"></div>
          <div class="admList" id="admLogsList"></div>
        </section>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/script.js"></script>
</body>
</html>
